
## üîó Navegaci√≥n

‚¨ÖÔ∏è [Endpoints](./Services.index.md "Services")  
üìñ [Documentacion](../index.MD "Docuemntacion Home")    
üè† [Home](../../README.MD "Home")  
üìñ [Endpoints](./Services.index.md "Services")  
üë• [Contribution](../../contribution.MD "Contribution")  


# üìÇ Activities - Endpoints

## üìñ Descripci√≥n
Este conjunto de endpoints permite gestionar las actividades dentro del sistema, incluyendo la creaci√≥n, obtenci√≥n, actualizaci√≥n y eliminaci√≥n de actividades.

> [!NOTE]  
> Una consulta Protegida.  
>Los roles que tienen acceso son los siguientes **[ USER ]**. 

---

## üìå √çndice de Endpoints

- üîπ [Obtener todas las actividades](#obtener-todas-las-actividades)
- üîπ [Crear una nueva actividad](#crear-una-nueva-actividad)
- üîπ [Obtener una actividad por ID](#obtener-una-actividad-por-id)
- üîπ [Actualizar una actividad](#actualizar-una-actividad)
- üîπ [Eliminar una actividad](#eliminar-una-actividad)

---

## Obtener todas las actividades

Muestra todas las actividades de la persona que lo esta pidiendo.
Muestra las actividades de los Centros Activos y Clases Activas 

Una Clase se Considera Activa siempre que su centro no este Archivado o su estado marque lo contrario.
Una clase se considera activa si su fecha limite aun no a terminado.

### üîó Endpoint
```http
GET /api/activities
```

### üì• Par√°metros de consulta (Query Parameters)

| Par√°metro    | Tipo             | Descripci√≥n |
|-------------|----------------|-------------|
| `searchTerm` | `string` | (Opcional) Permite buscar actividades por nombre o palabra clave. (Busca en Nombres de clase tambien) |
| `page` | `integer` | (Opcional) Indica el n√∫mero de p√°gina para la paginaci√≥n. Valor por defecto: `1`. |
| `pageSize` | `integer` | (opcional) Indica la cantidad de Items por pagina. Valor por defecto en `10`. |
| `center` | `string (UUID)` | (opcional) Indica el centro del cual muestra Actividades. |
| `tag` | `string (UUID)` | (opcional) Indica el Tag del cual muestra Actividades. |
| `order` | `string [ (near), (all) , (pending) , (completed) ]` | (opcional) Indica en que orden traer las actividades. Valor por defecto en `near`


#### Parametro *`order`*

>**Ordenamiento de Actividades**  
>
> ***near*** : Actividades Proximas,  Toda actividad cuya fecha no ha vencido se encuentra en Proximos, independientemente de su estado (completado o incompleto) 
> 
> ***all*** : Trae Todas las Actividades independientemente de su fecha o estado.
>
> ***pending*** : Trea todas las actividades con estado Pendiente de Revision. Una actividad pasa a un estado de pendiente cuando las suma de alumnos calificados **(exeptuando los alumnos no activos)** no es igual a la suma de de los Alumnos activos en la clase y su fecha de calificacion es menor a la fecha actual
>
> ***completed*** : Son Todas las Actividades donde la suma de los AlumnosActivos es igual a la Suma de Alumnos Calificados **(Exeptuando los alumnos no activos)**  
>

üìå **Ejemplo de solicitud con par√°metros:**  
```http
GET /api/activities?searchTerm=tarea1&page=2&center=10219jj9192h&tag=i91293i3&order=near
```

### üì§ Respuesta
Si la solicitud es exitosa, el servidor responder√° con un c√≥digo `200 OK` y un JSON con la lista de actividades.

#### ‚úÖ Ejemplo de respuesta (200 OK)
```json
{
  "data": [
    {
      "id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
      "name": "Examen Final",
      "qualificationDate": "2025-03-15T06:22:42.187Z",
      "tagActivityId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
      "class": {
        "id": "7e1a4a2b-8923-4b3d-b8e9-4eaa23fbe5b2",
        "name": "Matem√°ticas Avanzadas"
      },
      "centerId" "7e1a4a2b-8923-4b3d-b8e9-4eaa23fbe5b2"
    }
  ],
  "message": "Lista de actividades obtenida correctamente.",
  "statusCode": 200,
  "status": true
}
```

### üîÑ Explicaci√≥n de los campos Retornados

| Campo | Tipo | Descripci√≥n |
|--------|------|-------------|
| `id` | `string (UUID)` | Identificador √∫nico de la actividad. |
| `name` | `string` | Nombre de la actividad. |
| `qualificationDate` | `string (ISO 8601)` | Fecha en la que se calificar√° la actividad. |
| `tagActivityId` | `string (UUID)` | Identificador de la etiqueta asociada a la actividad. |
| `unitId` | `string (UUID)` | Identificador de la unidad a la que pertenece la actividad. |
| `class.id` | `string (UUID)` | Identificador unico de la Clase a la cual pertenece |
| `class.name` | `string (UUID)` | Nombre de la clase a la cual pertenece
| `centerId` | `string (UUID)` | Identificador unico del centro al cual pertenece esta actividad. | 

---

## ‚ö†Ô∏è Posibles errores

| C√≥digo | Descripci√≥n |
|--------|-------------|
| `400 Bad Request` | Ocurre si los par√°metros enviados son inv√°lidos. |
| `500 Internal Server Error` | Error interno en el servidor. |
| `401 Unauthorized` | No se encuentra Autorizado a usar este metodo.  Para mas Informacion lea [Login Documentation](./AuthDocumentation.MD) |


Ejemplo de respuesta en caso de error:
```json
{
  "message": "Error interno del servidor.",
  "statusCode": 500,
  "status": false
}
```

---

## üìù Notas adicionales

- La paginaci√≥n ayuda a optimizar el rendimiento en consultas con muchas actividades.
- Se recomienda utilizar el par√°metro `order` para filtrar actividades de manera eficiente.
- El campo `isExtra` permite distinguir entre actividades regulares y complementarias.

---
<!-- Creacion de una Actividad -->
## Crear una nueva actividad

Este endpoint permite la creaci√≥n de una nueva actividad dentro del sistema. Una actividad pertenece a una unidad espec√≠fica dentro de un curso y esta categorizada con una etiqueta (`tagActivityId`).

---

### üîó Endpoint
```http
POST /api/activities
```

üìå **Descripci√≥n:** Se env√≠a un objeto JSON con los detalles de la actividad a crear. El sistema validar√° que: la unidad (`unitId`) exista antes de procesar la solicitud, la actividad
(`tagActivityId`) exista antes de procesar la solicitud

---

### üì• Request Body (application/json)
El cuerpo de la solicitud debe contener los siguientes campos:

```json
{
  "name": "string",
  "isExtra": true,
  "maxScore": 100,
  "qualificationDate": "2025-03-15T07:23:44.842Z",
  "tagActivityId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "unitId": "3fa85f64-5717-4562-b3fc-2c963f66afa6"
}
```

### üìñ Descripci√≥n de los campos
| Campo | Tipo | Requerido | Descripci√≥n |
|--------|------|----------|-------------|
| `name` | `string` | ‚úÖ | Nombre de la actividad. |
| `isExtra` | `boolean` | ‚úÖ | Indica si la actividad es complementaria (extra puntos fuera del 100). |
| `maxScore` | `integer` | ‚úÖ | Puntuaci√≥n m√°xima asignada a la actividad. (Diferente del Maximo total qu puede obtener en un curso) |
| `qualificationDate` | `string (ISO 8601)` | ‚úÖ | Fecha de calificaci√≥n de la actividad. |
| `tagActivityId` | `string (UUID)` | ‚úÖ | ID de la etiqueta asociada a la actividad. |
| `unitId` | `string (UUID)` | ‚úÖ | ID de la unidad a la que pertenece la actividad. |

---

### üì§ Respuesta esperada
Si la solicitud es exitosa, el servidor responder√° con un c√≥digo `200 OK` y devolver√° la actividad creada.

#### ‚úÖ Ejemplo de respuesta (200 OK)
```json
{
  "data": {
    "hasNextPage": false,
    "hasPreviousPage": false,
    "currentPage": 1,
    "pageSize": 10,
    "totalItems": 6,
    "totalPages": 1,
    "items": [
      {
        "id": "e5f6a7b8-9e2d-4c63-b56f-219803a9d0c5",
        "name": "Proyecto de Geograf√≠a",
        "isExtra": false,
        "maxScore": 90,
        "qualificationDate": "2025-06-01T00:00:00",
        "tagActivityId": "25bb94dc-b13b-4649-b562-f1af741aeaf3",
        "unitId": "01dd6027-2e73-4a83-9b43-5e752727e93c"
      }
    ]
  },
  "message": "ACT-8085: Actividad encontrada correctamente.",
  "statusCode": 200,
  "status": true
}
```
### üîÑ Explicaci√≥n de los campos Retornados

| Campo | Tipo | Descripci√≥n |
|--------|------|-------------|
| `data.items[].id` | `string (UUID)` | Identificador √∫nico de la actividad. |
| `data.items[].name` | `string` | Nombre de la actividad. |
| `data.items[].isExtra` | `boolean` | Identificador de una actividad es Extra o no.
| `data.items[].qualificationDate` | `string (ISO 8601)` | Fecha en la que se calificar√° la actividad. |
| `data.items[].tagActivityId` | `string (UUID)` | Identificador de la etiqueta asociada a la actividad. |
| `data.items[].unitId` | `string (UUID)` | Identificador de la unidad a la que pertenece la actividad. |
| `data.items[].class.id` | `string (UUID)` | Identificador unico de la Clase a la cual pertenece |



### Notas 

> ***isExtra*** = `False`esta es una actividad que pertenece al total de puntos a evaluar dentro de la calificacion maxima que puede sacar el alumno.
>
> ***isExtra*** = `True` esta es una actividad fuera del puntaje normal. Una actividad con puntaje extraordinario. Su puntaje se califica sobre el maximo puntaje calificado siempre considerando su respectiva ponderacion por unidad o cenvercion por parcial.


---

### ‚ö†Ô∏è Posibles errores

| C√≥digo | Descripci√≥n |
|--------|-------------|
| `400 Bad Request` | Ocurre si los datos enviados son inv√°lidos o faltan campos requeridos. |
| `404 Not Found` | Ocurre si la unidad (`unitId`) no existe en la base de datos. |
| `500 Internal Server Error` | Error interno del servidor al procesar la solicitud. |
| `401 Unauthorized` | No se encuentra Autorizado a usar este metodo.  Para mas Informacion lea [Login Documentation](./AuthDocumentation.MD) |

üìå **Ejemplo de error si la unidad no existe:**
```json
{
  "message": "Unidad inv√°lida. No se encontr√≥ la unidad especificada.",
  "statusCode": 404,
  "status": false
}
```

## Obtener una actividad por ID

### üîó Endpoint  
```http
GET /api/activities/{id}
```

### üìÑ Descripci√≥n  

Este endpoint permite obtener la informaci√≥n detallada de una actividad espec√≠fica a partir de su ID.


### üîç Par√°metros  

| **Nombre** | **Tipo**         | **Ubicaci√≥n** | **Descripci√≥n** |
|-----------|----------------|--------------|----------------|
| `id`      | `string (UUID)` | `path`       | Identificador √∫nico de la actividad a consultar. |

### ‚úÖ Respuestas  

#### üü¢ **200 - Success**  
> La solicitud se complet√≥ correctamente y devuelve los detalles de la actividad.

```json
{
  "data": {
    "id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
    "name": "Actividad 1",
    "isExtra": true,
    "maxScore": 10,
    "qualificationDate": "2025-03-15T16:28:11.697Z",
    "tagActivityId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
    "unit": {
      "id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
      "number": 3
    },
    "class": {
      "id": "7e1a4a2b-8923-4b3d-b8e9-4eaa23fbe5b2",
      "name": "Matem√°ticas Avanzadas"
    },
  },
  "message": "Actividad obtenida exitosamente",
  "statusCode": 200,
  "status": true
}
``` 

| Campo | Tipo | Descripci√≥n |
|--------|------|-------------|
| `id` | `string (UUID)` | Identificador √∫nico de la actividad. |
| `name` | `string` | Nombre de la actividad. |
| `isExtra` | `boolean` | Identificador de una actividad es Extra o no.|
| `maxScore` | `number` | Puntaje maximo que podra obtener un alumno en esta actividad.|
| `qualificationDate` | `string (ISO 8601)` | Fecha en la que se calificar√° la actividad. |
| `tagActivityId` | `string (UUID)` | Identificador de la etiqueta asociada a la actividad. |
| `unit.id` | `string (UUID)` | Identificador de la unidad a la que pertenece la actividad. |
| `unit.number` | `integer` | Numero de la Unidad a la cual esta asociada esta actividad |
| `class.id` | `string (UUID)` | Identificador unico de la Clase a la cual pertenece |
| `class.name` | `string (UUID)` | Nombre de la clase a la cual pertenece |



---

## ‚ö†Ô∏è Posibles errores

| C√≥digo | Descripci√≥n |
|--------|-------------|
| `400 Bad Request` | Ocurre si los par√°metros enviados son inv√°lidos. |
| `500 Internal Server Error` | Error interno en el servidor. |
| `404 Not Found` | No se ha encontrado el registro {`id`}|
| `401 Unauthorized` | No se encuentra Autorizado a usar este metodo.  Para mas Informacion lea [Login Documentation](./AuthDocumentation.MD) |
---

### üìå Notas  
- üÜî **El ID de la actividad debe ser un UUID v√°lido**.  




## Actualizar una actividad

### üîó Endpoint
```http
PUT /api/activities/{id}
```

### üìù Descripci√≥n
Este endpoint permite actualizar una actividad existente mediante su `id`. Se debe enviar un cuerpo de solicitud con los nuevos valores de la actividad.

### üì• Par√°metros

en la consulta del metodo es necesario el parametro siguiente: 

| Nombre | Tipo | Ubicaci√≥n | Descripci√≥n |
|--------|------|-----------|-------------|
| `id` | `string (UUID)` | `path` | Identificador √∫nico de la actividad a actualizar. |


### üìñ Descripci√≥n de los campos
| Campo | Tipo | Requerido | Descripci√≥n |
|--------|------|----------|-------------|
| `name` | `string` | ‚úÖ | Nombre de la actividad. |
| `isExtra` | `boolean` | ‚úÖ | Indica si la actividad es complementaria (extra puntos fuera del 100). |
| `maxScore` | `integer` | ‚úÖ | Puntuaci√≥n m√°xima asignada a la actividad. (Diferente del Maximo total qu puede obtener en un curso) |
| `qualificationDate` | `string (ISO 8601)` | ‚úÖ | Fecha de calificaci√≥n de la actividad. |
| `tagActivityId` | `string (UUID)` | ‚úÖ | ID de la etiqueta asociada a la actividad. |
| `unitId` | `string (UUID)` | ‚úÖ | ID de la unidad a la que pertenece la actividad. |


### üì© Cuerpo de la Solicitud (`application/json`)
```json
{
  "name": "string",
  "isExtra": true,
  "maxScore": 100,
  "qualificationDate": "2025-03-15T22:33:36.002Z",
  "tagActivityId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "unitId": "3fa85f64-5717-4562-b3fc-2c963f66afa6"
}
```

### üì§ Respuesta Exitosa (`200 OK`)

Cuando los Cambios se Han aplicado Correctamente
```json
{
  "data": {
    "id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
    "name": "string",
    "isExtra": true,
    "maxScore": 0,
    "qualificationDate": "2025-03-15T22:33:36.003Z",
    "tagActivityId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
    "unitId": "3fa85f64-5717-4562-b3fc-2c963f66afa6"
  },
  "message": "Actividad actualizada exitosamente",
  "statusCode": 200,
  "status": true
}
```

### ‚ö†Ô∏è Posibles Errores
| C√≥digo | Descripci√≥n |
|--------|-------------|
| `400 Bad Request` | Datos inv√°lidos en la solicitud. |
| `404 Not Found` | La actividad con el {`ID`} especificado no existe. |
| `500 Internal Server Error` | Error en el servidor al procesar la solicitud. |
| `401 Unauthorized` | No se encuentra Autorizado a usar este metodo.  Para mas Informacion lea [Login Documentation](./AuthDocumentation.MD) |

### üîç Notas Adicionales
- **El campo `id` es obligatorio** y debe enviarse en la URL.
- **El `maxScore` no puede ser menor a 0.**
- **El `qualificationDate` debe estar en formato ISO 8601.**
- Asegurarse de que los `tagActivityId` y `unitId` existan antes de enviar la solicitud.

---
‚úÖ **Ejemplo de Uso**:
```http
PUT /api/activities/3fa85f64-5717-4562-b3fc-2c963f66afa6
```



## Eliminar una actividad


### üîó Endpoint
```http
DELETE /api/activities/{id}
```

### üìù Descripci√≥n
Este endpoint permite eliminar una actividad existente mediante su `id`. Al eliminar la actividad, **se eliminan tambi√©n todas las calificaciones de alumnos asociadas**, independientemente de su estado (activo o inactivo).

### üì• Par√°metros
| Nombre | Tipo | Ubicaci√≥n | Descripci√≥n |
|--------|------|-----------|-------------|
| `id` | `string (UUID)` | `path` | Identificador √∫nico de la actividad a eliminar. |

### üì§ Respuesta Exitosa (`200 OK`)
```json
{
  "data": {
    "id": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
    "name": "string",
    "isExtra": true,
    "maxScore": 0,
    "qualificationDate": "2025-03-15T22:36:57.651Z",
    "tagActivityId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
    "unitId": "3fa85f64-5717-4562-b3fc-2c963f66afa6"
  },
  "message": "Actividad eliminada exitosamente",
  "statusCode": 200,
  "status": true
}
```

### ‚ö†Ô∏è Posibles Errores
| C√≥digo | Descripci√≥n |
|--------|-------------|
| `400 Bad Request` | Datos inv√°lidos en la solicitud. |
| `404 Not Found` | La actividad con el ID especificado no existe. |
| `500 Internal Server Error` | Error en el servidor al procesar la solicitud. |
| `401 Unauthorized` | No se encuentra Autorizado a usar este metodo.  Para mas Informacion lea [Login Documentation](./AuthDocumentation.MD) |

### üîç Notas Adicionales
- **El campo `id` es obligatorio** y debe enviarse en la URL.
- **Todas las calificaciones asociadas a la actividad ser√°n eliminadas autom√°ticamente.**
- **Esta acci√≥n es irreversible**, aseg√∫rese antes de eliminar una actividad.

---
‚úÖ **Ejemplo de Uso**:
```http
DELETE /api/activities/3fa85f64-5717-4562-b3fc-2c963f66afa6
```
